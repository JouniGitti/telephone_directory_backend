(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),l=(t(20),t(4)),c=t(2),i=(t(21),function(e){var n=e.person,t=e.handleDeleting;return r.a.createElement("li",{className:"number"},n.name," Tel: ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n)}},"delete"))}),m=function(e){var n=e.persons,t=e.filterWord,a=e.onDeleteName;return r.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement(i,{key:e.name,person:e,handleDeleting:a})})))},f=function(e){var n=e.filter,t=e.onFilterChange;return r.a.createElement("div",null,"filter shown with:",r.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.handleNameAdding,t=e.nameValue,a=e.handleNameChanging,o=e.numberValue,u=e.handleNumberChanging;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:o,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=t(3),h=t.n(s),b="http://localhost:3001/api/persons",g=function(e){return e.then((function(e){return e.data}))},p=function(){return g(h.a.get(b))},E=function(e){return g(h.a.post(b,e))},v=function(e){return h.a.delete("".concat(b,"/").concat(e))},w=function(e,n){return g(h.a.put("".concat(b,"/").concat(e),n))},j="notification",O=function(e){var n=e.message;return null===n?null:(n.includes("deleted")&&(j="error"),r.a.createElement("div",{className:j},n))},C=function(){var e=Object(a.useState)(""),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),s=i[0],h=i[1],b=Object(a.useState)(""),g=Object(c.a)(b,2),j=g[0],C=g[1],N=Object(a.useState)([]),D=Object(c.a)(N,2),S=D[0],y=D[1],T=Object(a.useState)(null),k=Object(c.a)(T,2),A=k[0],V=k[1],P="Added ".concat(t);Object(a.useEffect)((function(){p().then((function(e){y(e)})).catch((function(e){console.log("loading of personslist failed with error: ",e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h3",null,"Phonebook APP"),r.a.createElement(O,{message:A}),r.a.createElement(f,{filter:j,onFilterChange:function(e){C(e.target.value)}}),r.a.createElement("h3",null,"Add a new name:"),r.a.createElement(d,{handleNameAdding:function(e){e.preventDefault();var n=S.some((function(e){return e.name===t}));n&&function(e){var n=S.find((function(n){return n.name===e})),t=Object(l.a)(Object(l.a)({},n),{},{number:s});e===t.name&&(window.confirm("Do you wish to change the number for ".concat(t.name,"?")),w(t.id,t).then((function(e){y(S.map((function(t){return t.id!==n.id?t:e}))),V("Updated "+t.name),setTimeout((function(){V(null)}),3e3)})))}(t),n||E({name:t,number:s}).then((function(e){y(S.concat(e)),V(P),setTimeout((function(){V(null)}),3e3)})).catch((function(e){console.log("error creating a person with error code:",e)})),o(""),h("")},handleNameChanging:function(e){o(e.target.value)},handleNumberChanging:function(e){h(e.target.value)},nameValue:t,numberValue:s}),r.a.createElement("h3",null,"The numbers on the list are:"),r.a.createElement(m,{persons:S,filterWord:j,onDeleteName:function(e){window.confirm("Do you wish to delete the name ".concat(e.name," from the list?"))&&v(e.id).then((function(){y(S.filter((function(n){return n.id!==e.id}))),V("Deleted "+e.name),setTimeout((function(){V(null)}),3e3)})).catch((function(n){V(e.name+" already deleted from the database."),console.log("error with deleting a person. Error code: ",n),setTimeout((function(){V(null)}),3e3)}))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.420f84d7.chunk.js.map